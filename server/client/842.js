"use strict";(self.webpackChunkwebassembly_master=self.webpackChunkwebassembly_master||[]).push([[842],{8842:(w,m,i)=>{i.r(m),i.d(m,{EdtestModule:()=>b});var h=i(9808),f=i(8555),s=i(5e3);const g=t=>t;let v=(()=>{class t{constructor(e,n,o,r){this.moduleExportName=e,this.jsLoader=n,this.scriptPath=o,this.emscriptenService=r}get module(){return this.resolvedModule}ngAfterViewInit(){this.resolveModule()}resolveModule(){this.emscriptenService.loadScript(this.moduleExportName,`${this.scriptPath}/${this.jsLoader}?ts=${Date.now()}`).then(()=>{const e={locateFile:o=>`${this.scriptPath}/${o}?ts=${Date.now()}`};return(this.moduleDecorator||g)(e),window[this.moduleExportName](e)}).then(e=>{this.resolvedModule=e})}}return t.\u0275fac=function(e){s.$Z()},t.\u0275dir=s.lG2({type:t}),t})();var y=i(520),E=i(2547);const F=["canvas"],c=t=>t.split("/").reverse()[0],p=["image/bmp","image/x-windows-bmp","image/jpeg","image/pjpeg","image/png"],a="assets/images/logoUP.png",d=document.documentElement.requestFullscreen||document.documentElement.webkitRequestFullscreen||document.documentElement.msRequestFullscreen||document.documentElement.mozRequestFullScreen,C=[{path:"",component:(()=>{class t extends v{constructor(e,n,o){super("Cube3dModule","3d-cube.js","/assets/scripts/3d-test",o),this.httpClient=e,this.ngZone=n,this.emscriptenService=o,this.supportsFullscreen=!!d,this.fileUploadAccept=p.join(","),this.predefinedImages=[a,"assets/img/3d-cube/cat.png","assets/img/3d-cube/embroidery.png"],this.moduleDecorator=r=>{r.arguments=[c(a)],r.preRun=[()=>{r.FS_createPreloadedFile("/",c(a),a,!0)}],r.canvas=this.canvas.nativeElement,r.printErr=u=>{u.startsWith("WARNING")||this.ngZone.run(()=>this.error=u)}}}toggleFullscreen(){d&&d.bind(this.canvas.nativeElement)()}selectPredefinedImage(e){this.error=null;const n=this.predefinedImages[e];this.httpClient.get(n,{responseType:"arraybuffer"}).subscribe(o=>this.setTexture(c(n),new Uint8Array(o)))}onFileUploaded(e){if(!e.length)return;this.error=null;const n=e[0];if(p.indexOf(n.type)<0)return void(this.error=`Unsupported mime type ${n.type}`);const o=n.name,r=new FileReader;r.onload=()=>{const u=new Uint8Array(r.result);this.setTexture(o,u)},r.readAsArrayBuffer(n)}setTexture(e,n){const o=e===c(a);o||this.module.FS_createDataFile("/",e,n,!0),this.module.ccall("set_texture","void",["string"],[e]),o||this.module.FS_unlink(e)}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(y.eN),s.Y36(s.R0b),s.Y36(E.g))},t.\u0275cmp=s.Xpm({type:t,selectors:[["edtest"]],viewQuery:function(e,n){if(1&e&&s.Gf(F,5),2&e){let o;s.iGM(o=s.CRH())&&(n.canvas=o.first)}},features:[s.qOj],decls:5,vars:0,consts:[["oncontextmenu","event.preventDefault()",1,"ed-test"],["canvas",""],["id","fps"]],template:function(e,n){1&e&&(s.TgZ(0,"p"),s._uU(1,"edtest works!"),s.qZA(),s._UZ(2,"canvas",0,1)(4,"div",2))},styles:[""]}),t})()}];let b=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[h.ez,f.Bz.forChild(C)]]}),t})()}}]);