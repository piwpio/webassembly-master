"use strict";(self.webpackChunkwebassembly_master=self.webpackChunkwebassembly_master||[]).push([[956],{8956:(V,d,o)=>{o.r(d),o.d(d,{ServerSortModule:()=>j});var p=o(9808),B=o(5529),f=o(7625),R=o(2198),i=o(5832),e=o(5e3),g=o(8487),y=o(6536);let _=(()=>{class s{constructor(a,t,r){this.socketService=a,this.serverReadyService=t,this.chRef=r,this.isReadyForNextTest=!1,this.isRunning=!1,this.tableDisplayedColumns=null,this.tableDisplayedColumnsWithTestNo=null,this.tablePreparedResults=null,this.chartBlockResults=null,this.chartBarsResults=null,this.allResults=null,this.$destroy=new B.xQ,this.serverReadyService.onReady().pipe((0,f.R)(this.$destroy)).subscribe(n=>{this.setIsReadyForNextTest(n)}),this.socketService.startListeningOn("status").pipe((0,f.R)(this.$destroy),(0,R.h)(n=>!!(null==n?void 0:n.testType)),(0,R.h)(n=>n.testType===this.testType)).subscribe(n=>{console.log(n),this.isRunning=!n.isReady,n.testResults&&this.prepareResults(n.testResults)})}ngOnInit(){this.socketService.emitGetStatus()}ngOnDestroy(){this.$destroy.next(!0),this.$destroy.complete()}runTest(){const a=this.getTestData();a&&(this.tableDisplayedColumns=null,this.tableDisplayedColumnsWithTestNo=null,this.tablePreparedResults=null,this.allResults=null,this.chartBarsResults=null,this.chartBlockResults=null,this.socketService.emitNewTest(a))}setIsReadyForNextTest(a){this.isReadyForNextTest=a,this.chRef.markForCheck()}prepareResults(a){for(const t of a)if(t){if(t.memory=t.memory.map(r=>(0,i.Xp)(r)),t.performance=t.performance.map(r=>(0,i.Xp)(r)),this.allResults||(this.allResults={memory:{combined:[]},performance:{combined:[]}}),this.allResults.memory.combined=[...this.allResults.memory.combined,...t.memory],this.allResults.performance.combined=[...this.allResults.performance.combined,...t.performance],this.chartBarsResults||(this.chartBarsResults={memory:[{name:"Best",series:[]},{name:"Worst",series:[]},{name:"Average",series:[]},{name:"Median",series:[]}],performance:[{name:"Best",series:[]},{name:"Worst",series:[]},{name:"Average",series:[]},{name:"Median",series:[]}]}),this.chartBarsResults.memory[0].series.push({name:t.testLabel,value:(0,i.oq)(t.memory)}),this.chartBarsResults.memory[1].series.push({name:t.testLabel,value:(0,i.dm)(t.memory)}),this.chartBarsResults.memory[2].series.push({name:t.testLabel,value:(0,i.A5)(t.memory)}),this.chartBarsResults.memory[3].series.push({name:t.testLabel,value:(0,i.rV)(t.memory)}),this.chartBarsResults.performance[0].series.push({name:t.testLabel,value:(0,i.oq)(t.performance)}),this.chartBarsResults.performance[1].series.push({name:t.testLabel,value:(0,i.dm)(t.performance)}),this.chartBarsResults.performance[2].series.push({name:t.testLabel,value:(0,i.A5)(t.performance)}),this.chartBarsResults.performance[3].series.push({name:t.testLabel,value:(0,i.rV)(t.performance)}),this.chartBlockResults||(this.chartBlockResults={memory:{},performance:{}}),this.chartBlockResults.memory[t.testIndex]=[],this.chartBlockResults.performance[t.testIndex]=[],this.chartBlockResults.memory[t.testIndex].push({name:`Best ${t.testLabel}`,value:(0,i.oq)(t.memory)}),this.chartBlockResults.memory[t.testIndex].push({name:`Worst ${t.testLabel}`,value:(0,i.dm)(t.memory)}),this.chartBlockResults.memory[t.testIndex].push({name:`Average ${t.testLabel}`,value:(0,i.A5)(t.memory)}),this.chartBlockResults.memory[t.testIndex].push({name:`Median ${t.testLabel}`,value:(0,i.rV)(t.memory)}),this.chartBlockResults.performance[t.testIndex].push({name:`Best ${t.testLabel}`,value:(0,i.oq)(t.performance)}),this.chartBlockResults.performance[t.testIndex].push({name:`Worst ${t.testLabel}`,value:(0,i.dm)(t.performance)}),this.chartBlockResults.performance[t.testIndex].push({name:`Average ${t.testLabel}`,value:(0,i.A5)(t.performance)}),this.chartBlockResults.performance[t.testIndex].push({name:`Median ${t.testLabel}`,value:(0,i.rV)(t.performance)}),this.tableDisplayedColumns||(this.tableDisplayedColumns=[],this.tableDisplayedColumnsWithTestNo=["testNo"]),this.tableDisplayedColumns.push(t.testLabel),this.tableDisplayedColumnsWithTestNo.push(t.testLabel),!this.tablePreparedResults){this.tablePreparedResults={memory:[],performance:[]};for(let r=0;r<t.memory.length;r++)this.tablePreparedResults.memory.push({testNo:r});for(let r=0;r<t.performance.length;r++)this.tablePreparedResults.performance.push({testNo:r})}for(let r=0;r<t.memory.length;r++)this.tablePreparedResults.memory[r][t.testLabel]=t.memory[r];for(let r=0;r<t.performance.length;r++)this.tablePreparedResults.performance[r][t.testLabel]=t.performance[r]}}}return s.\u0275fac=function(a){return new(a||s)(e.Y36(g.$),e.Y36(y.v),e.Y36(e.sBO))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-base-server-test"]],decls:0,vars:0,template:function(a,t){},encapsulation:2}),s})();var x=o(1271),h=o(4106),v=o(7531),u=o(3075),b=o(4107),N=o(508),T=o(7423),C=o(773),m=o(6346),D=o(1091);function Z(s,l){1&s&&(e.TgZ(0,"div",2),e._UZ(1,"mat-spinner",3),e.qZA()),2&s&&(e.xp6(1),e.Q6J("diameter",32))}function S(s,l){1&s&&(e.TgZ(0,"th",19),e._uU(1,"Test No."),e.qZA())}function A(s,l){if(1&s&&(e.TgZ(0,"td",20),e._uU(1),e.qZA()),2&s){const a=l.$implicit;e.xp6(1),e.hij("",a.testNo+1,".")}}function L(s,l){if(1&s&&(e.TgZ(0,"th",19),e._uU(1),e.qZA()),2&s){const a=e.oxw().$implicit;e.xp6(1),e.Oqu(a)}}function M(s,l){if(1&s&&(e.TgZ(0,"td",20),e._uU(1),e.qZA()),2&s){const a=l.$implicit,t=e.oxw().$implicit,r=e.oxw().$implicit,n=e.oxw(2);e.Tol(n.getRowClass(a[t],n.allResults[r].combined)),e.xp6(1),e.AsE(" ",a[t]," ","performance"===r?"ms":"MB"," ")}}function F(s,l){1&s&&(e.ynx(0,21),e.YNc(1,L,2,1,"th",9),e.YNc(2,M,2,4,"td",22),e.BQk()),2&s&&e.Q6J("matColumnDef",l.$implicit)}function J(s,l){1&s&&e._UZ(0,"tr",23)}function k(s,l){1&s&&e._UZ(0,"tr",24)}function Q(s,l){if(1&s&&e._UZ(0,"ngx-charts-number-card",25),2&s){const a=l.$implicit,t=e.oxw().$implicit,r=e.oxw(2);e.Q6J("results",r.chartBlockResults[t][a.key])("cardColor","#000")("scheme","horizon")}}function $(s,l){if(1&s&&(e.ynx(0),e.TgZ(1,"div",6),e._uU(2),e.qZA(),e.TgZ(3,"table",7),e.ynx(4,8),e.YNc(5,S,2,0,"th",9),e.YNc(6,A,2,1,"td",10),e.BQk(),e.YNc(7,F,3,1,"ng-container",11),e.YNc(8,J,1,0,"tr",12),e.YNc(9,k,1,0,"tr",13),e.qZA(),e.TgZ(10,"div",14)(11,"div",15),e._UZ(12,"ngx-charts-bar-vertical-2d",16),e.qZA(),e.TgZ(13,"div",17),e.YNc(14,Q,1,3,"ngx-charts-number-card",18),e.ALo(15,"keyvalue"),e.qZA()(),e.BQk()),2&s){const a=l.$implicit,t=e.oxw(2);e.xp6(2),e.Oqu("performance"===a?"Execution time [ms]":"Memory [MB]"),e.xp6(1),e.Q6J("dataSource",t.tablePreparedResults[a]),e.xp6(4),e.Q6J("ngForOf",t.tableDisplayedColumns),e.xp6(1),e.Q6J("matHeaderRowDef",t.tableDisplayedColumnsWithTestNo),e.xp6(1),e.Q6J("matRowDefColumns",t.tableDisplayedColumnsWithTestNo),e.xp6(3),e.Q6J("results",t.chartBarsResults[a])("legend",!0)("yAxisLabel","performance"===a?"time [ms]":"size [MB]")("showYAxisLabel",!0)("xAxis",!0)("yAxis",!0),e.xp6(2),e.Q6J("ngForOf",e.lcZ(15,12,t.chartBlockResults[a]))}}const I=function(){return["performance","memory"]};function Y(s,l){1&s&&(e.TgZ(0,"div",4),e.YNc(1,$,16,14,"ng-container",5),e.qZA()),2&s&&(e.xp6(1),e.Q6J("ngForOf",e.DdM(1,I)))}let O=(()=>{class s{constructor(){this.getRowClass=i.gT}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-results"]],inputs:{isRunning:"isRunning",chartBarsResults:"chartBarsResults",chartBlockResults:"chartBlockResults",tablePreparedResults:"tablePreparedResults",tableDisplayedColumns:"tableDisplayedColumns",tableDisplayedColumnsWithTestNo:"tableDisplayedColumnsWithTestNo",allResults:"allResults"},decls:2,vars:2,consts:[["class","loading-container",4,"ngIf"],["class","results-container",4,"ngIf"],[1,"loading-container"],[3,"diameter"],[1,"results-container"],[4,"ngFor","ngForOf"],[1,"test-case-label"],["mat-table","",1,"mat-elevation-z2",3,"dataSource"],["matColumnDef","testNo"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"charts__container"],[1,"chart__container--bar"],[3,"results","legend","yAxisLabel","showYAxisLabel","xAxis","yAxis"],[1,"chart__container--card"],[3,"results","cardColor","scheme",4,"ngFor","ngForOf"],["mat-header-cell",""],["mat-cell",""],[3,"matColumnDef"],["mat-cell","",3,"class",4,"matCellDef"],["mat-header-row",""],["mat-row",""],[3,"results","cardColor","scheme"]],template:function(a,t){1&a&&(e.YNc(0,Z,2,1,"div",0),e.YNc(1,Y,2,2,"div",1)),2&a&&(e.Q6J("ngIf",t.isRunning),e.xp6(1),e.Q6J("ngIf",!t.isRunning&&t.chartBarsResults))},directives:[p.O5,C.Ou,p.sg,m.BZ,m.w1,m.fO,m.ge,m.Dz,m.ev,m.as,m.XQ,m.nj,m.Gk,D.H5,D.vg],pipes:[p.Nd],styles:[""]}),s})(),U=(()=>{class s extends _{constructor(a,t,r,n){super(a,t,r),this.socketService=a,this.serverReadyService=t,this.chRef=r,this.matSnackBar=n,this.testType="sort",this.testData={testType:this.testType,repeatTimes:1,clientData:[],custom:{arrayLength:1e5,floatDataType:!0}}}getTestData(){return this.areInputsValid()?(this.testData.clientData=this.generateFeed(this.testData.custom.arrayLength,this.testData.custom.floatDataType),this.testData):(this.matSnackBar.open("Invalid inputs"),null)}areInputsValid(){const a=this.testData.repeatTimes,t=this.testData.custom.arrayLength;return"boolean"==typeof this.testData.custom.floatDataType&&a>=1&&a<=10&&t>1&&t<=1e7}generateFeed(a,t=!0,r=2e8){const n=[];if(t)for(let c=0;c<a;c++)n.push(Math.random());else for(let c=0;c<a;c++)n.push(Math.floor(Math.random()*r));return n}}return s.\u0275fac=function(a){return new(a||s)(e.Y36(g.$),e.Y36(y.v),e.Y36(e.sBO),e.Y36(x.ux))},s.\u0275cmp=e.Xpm({type:s,selectors:[["server-sort"]],features:[e.qOj],decls:22,vars:16,consts:[[1,"form__container"],["appearance","outline"],["matInput","","type","number","min","1","max","10000000",3,"disabled","ngModel","ngModelChange"],["matInput","","type","number","min","1","max","10",3,"ngModel","disabled","ngModelChange"],[3,"disabled","ngModel","ngModelChange"],["dataType",""],[3,"value"],["mat-flat-button","","color","primary","type","submit",3,"disabled","click"],[3,"isRunning","chartBarsResults","chartBlockResults","tablePreparedResults","tableDisplayedColumns","tableDisplayedColumnsWithTestNo","allResults"]],template:function(a,t){1&a&&(e.TgZ(0,"div",0)(1,"div")(2,"mat-form-field",1)(3,"mat-label"),e._uU(4,"Array elements number"),e.qZA(),e.TgZ(5,"input",2),e.NdJ("ngModelChange",function(n){return t.testData.custom.arrayLength=n}),e.qZA()(),e.TgZ(6,"mat-form-field",1)(7,"mat-label"),e._uU(8,"Number of tests"),e.qZA(),e.TgZ(9,"input",3),e.NdJ("ngModelChange",function(n){return t.testData.repeatTimes=n}),e.qZA()(),e.TgZ(10,"mat-form-field",1)(11,"mat-label"),e._uU(12,"Data type"),e.qZA(),e.TgZ(13,"mat-select",4,5),e.NdJ("ngModelChange",function(n){return t.testData.custom.floatDataType=n}),e.TgZ(15,"mat-option",6),e._uU(16,"Float"),e.qZA(),e.TgZ(17,"mat-option",6),e._uU(18,"Integer"),e.qZA()()(),e.TgZ(19,"button",7),e.NdJ("click",function(){return t.runTest()}),e._uU(20," Run benchmark "),e.qZA()()(),e._UZ(21,"app-results",8)),2&a&&(e.xp6(5),e.Q6J("disabled",!t.isReadyForNextTest)("ngModel",t.testData.custom.arrayLength),e.xp6(4),e.Q6J("ngModel",t.testData.repeatTimes)("disabled",!t.isReadyForNextTest),e.xp6(4),e.Q6J("disabled",!t.isReadyForNextTest)("ngModel",t.testData.custom.floatDataType),e.xp6(2),e.Q6J("value",!0),e.xp6(2),e.Q6J("value",!1),e.xp6(2),e.Q6J("disabled",!t.isReadyForNextTest),e.xp6(2),e.Q6J("isRunning",t.isRunning)("chartBarsResults",t.chartBarsResults)("chartBlockResults",t.chartBlockResults)("tablePreparedResults",t.tablePreparedResults)("tableDisplayedColumns",t.tableDisplayedColumns)("tableDisplayedColumnsWithTestNo",t.tableDisplayedColumnsWithTestNo)("allResults",t.allResults))},directives:[h.KE,h.hX,v.Nt,u.qQ,u.Fd,u.wV,u.Fj,u.JJ,u.On,b.gD,N.ey,T.lW,O],styles:[""]}),s})();var W=o(8555),P=o(9776);const w=[{path:"",component:U}];let j=(()=>{class s{}return s.\u0275fac=function(a){return new(a||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[p.ez,W.Bz.forChild(w),h.lN,b.LD,v.c,u.u5,T.ot,C.Cq,P.C]]}),s})()}}]);